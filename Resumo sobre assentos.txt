üöå Resumo T√©cnico ‚Äì Marca√ß√£o de √înibus e L√≥gica de Assentos PNSPA
Estrutura de Assentos e Pol√≠ticas de Uso
Total de assentos por √¥nibus: 46

Assentos bloqueados: 7 e 8 (nunca podem ser selecionados ou marcados)

Assentos reservados: 43, 44, 45 e 46 (exclusivos para libera√ß√£o manual via painel adminOnibus.html)

Assentos dispon√≠veis ao p√∫blico: 40 (1‚Äì6, 9‚Äì42)

Se TODOS os 40 assentos forem ocupados, o sistema identifica o √¥nibus como lotado.

1. Marca√ß√£o Normal (Vagas Dispon√≠veis)
a) Usu√°rio Solo (sem acompanhante)
Sistema atribui automaticamente o pr√≥ximo assento livre.

Valor gravado na coluna ASSENTO (planilha Agendamentos).

Exemplo: ASSENTO = 5.

b) Usu√°rio com acompanhante
Sistema busca dois assentos livres sequenciais (ou os mais pr√≥ximos poss√≠veis).

Ambos os assentos s√£o gravados juntos (separados por v√≠rgula).

Exemplo: ASSENTO = 12,13

O campo ACOMPANHANTE recebe nome ou refer√™ncia do acompanhante.

Observa√ß√£o:
Assentos bloqueados (7 e 8) nunca entram na busca autom√°tica.
Assentos reservados (43‚Äì46) s√≥ aparecem para sele√ß√£o se o admin liberar manualmente para algum caso especial (idoso, gestante, PCD etc).

2. Fila de Espera (√înibus Lotado)
Quando todos os 40 assentos padr√£o est√£o ocupados para a data selecionada:

a) Usu√°rio solo na fila
Recebe um c√≥digo no formato RXX (XX = posi√ß√£o na fila).

Exemplo: 1¬∫ da fila: ASSENTO = R1, 2¬∫: R2, etc.

O campo STATUS recebe: "Reserva".

b) Usu√°rio com acompanhante na fila
Ambos (titular e acompanhante) recebem o mesmo c√≥digo de reserva.

Exemplo: 2¬∫ grupo da fila: ASSENTO = R2 para ambos.

STATUS: "Reserva"

3. Casos Especiais
Assentos 43‚Äì46 (reservados):

S√≥ podem ser atribu√≠dos pelo adminOnibus no painel administrativo, nunca por usu√°rios comuns.

Usados tipicamente para casos de acessibilidade, autoridade ou necessidade operacional.

Se liberados pelo admin, podem aumentar temporariamente a capacidade total.

Assentos bloqueados (7 e 8):

Sempre fora da l√≥gica de marca√ß√£o e n√£o entram no c√°lculo de lota√ß√£o.

4. Fluxo do Sistema e Auditoria
Marca√ß√£o de assento s√≥ √© permitida para usu√°rios ativos e validados.

Todos os dados s√£o registrados em Agendamentos, HistoricoUsuarios e HistoricoGeralUsuarios.

Usu√°rios na fila de espera podem ser promovidos automaticamente em caso de cancelamento, conforme a fun√ß√£o processarAlocacaoFilaDiaria.

5. Exemplos Pr√°ticos
Tipo	Assento	Acompanhante	Status
Solo com vaga	5	-	Agendado
Com acompanhante	12,13	Jo√£o da Silva	Agendado
Solo na fila de espera	R3	-	Reserva
Com acompanhante na fila	R4	Maria Costa	Reserva
Liberado admin (exemplo)	43	-	Agendado*

* Apenas se liberado manualmente pelo administrador.

6. Crit√©rios para √înibus Lotado e Abertura de Fila de Espera
O √¥nibus √© considerado lotado quando os 40 assentos de uso geral est√£o ocupados.

A partir desse momento, s√≥ √© poss√≠vel entrar na Fila de Espera; novas vagas s√≥ surgem por cancelamento ou libera√ß√£o administrativa.

Resumo Visual:
Assentos para usu√°rios: 1‚Äì6, 9‚Äì42 ‚Üí 40 assentos.

Bloqueados: 7, 8 ‚Üí nunca usados.

Reservados (admin): 43, 44, 45, 46.

Recomenda√ß√µes T√©cnicas
Valide sempre a disponibilidade real, desconsiderando bloqueados e reservados.

Exiba bloqueados como "indispon√≠vel" e reservados como "restrito/admin" na interface.

Registre o motivo ao liberar assento reservado no painel administrativo para fins de auditoria.
